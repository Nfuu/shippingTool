{"version":3,"sources":["loaders/useMines.js","loaders/useCoalPlants.js","components/MapControlButton.js","components/Map.js","loaders/usePorts.js","loaders/useFlows.js","loaders/useCountries.js","loaders/useCountryFlows.js","components/CustomLabel.js","components/CustomLabelCountry.js","loaders/useCountryMapping.js","components/ExportPortGraph.js","components/ImportPortGraph.js","components/PortInfo.js","images/Ember-logo.png","components/PortLinkSidebar.js","components/YearSelector.js","components/CommoditySelector.js","components/MtDisplay.js","components/CO2Display.js","components/LevelSelector.js","components/PortDisplay.js","components/MineDisplay.js","components/PlantDisplay.js","images/Coal_mine.png","components/MineInfo.js","images/power_plant.png","components/PlantInfo.js","components/MinePlantSidebar.js","App.js","reportWebVitals.js","index.js"],"names":["useMines","useState","data","setData","useEffect","csv","then","useCoalPlants","MapControlButton","props","active","setActive","onClick","height","fontSize","bg","color","_hover","children","Map","tooltipPosition","setTooltipPosition","minesActive","setMinesActive","plantsActive","setPlantsActive","loadPorts","usePorts","loadFlows","useFlows","loadCountries","useCountries","loadCountryFlows","useCountryFlows","mines","plants","allPorts","allFlows","countryNodes","countryFlows","levelSelected","D3Layer","map","useMap","d3","getPanes","overlayPane","selectAll","remove","L","svg","clickable","addTo","flows","filter","Year","yearSelected","Commodity","commoditySelected","ports","port","setPortData","setFlowData","overlay","select","attr","linkLayer","append","portLayer","portTooltip","style","Dots","join","d","latLngToLayerPoint","lat","lon","x","y","radius","flow","Math","sqrt","on","event","this","flowNum","displayFlow","toFixed","importExport","html","Port","sourcePort","flowData","source","target","Links","enter","targetPort","sourceCoords","targetCoords","dx","dy","sx","sy","controls","pathDraw","width","exit","transition","duration","pointer","isPortClicked","onSelectPort","CoalMines","MineTooltip","mineLayer","MineMarkers","Latitude","Longitude","Name","CoalPlants","PlantTooltip","PlantMarkers","MapContainer","id","center","zoom","scrollWheelZoom","zIndex","TileLayer","attribution","url","direction","position","top","right","CustomLabel","Text","textAnchor","verticalAnchor","dominantBaseline","value","CustomLabelCountry","countryMapping","useCountryMapping","Country","ExportPortGraph","portData","activeIndex","setActiveIndex","year","commodity","sort","a","b","parseFloat","forEach","num","decimals","formatFlowNumber","size","ResponsiveContainer","BarChart","slice","layout","margin","left","bottom","XAxis","type","hide","YAxis","Bar","dataKey","index","clickedPortInfo","setNewPort","entry","Cell","cursor","fill","LabelList","content","level","COLORS","PortInfo","selectedPort","obj","abs","getFlowCommodity","commodityFiltered","error","commodityData","justifyContent","alignItems","PieChart","Pie","innerRadius","outerRadius","nameKey","length","viewBox","PortLinkSidebar","clickedPort","portName","flowDirection","spacing","src","EmberLogo","ImportPortGraph","YearSelector","setYear","fontWeight","aria-label","defaultValue","min","max","step","onChangeEnd","val","onSelectYear","handleYearChange","boxSize","bgColor","CommoditySelector","setCommodity","onChange","onSelectCommodity","MtDisplay","mtAmount","displayAmount","displayText","CO2Display","CO2Amount","label","placement","InfoOutline","LevelSelector","setLevel","onSelectLevel","PortDisplay","badgeColor","display","textAlign","borderRadius","px","deg2rad","deg","PI","MineDisplay","mine","Distance","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","getDistance","Output","commodityMines","Thermal","Metallurgical","topMines","toLowerCase","selectMine","isAnimationActive","PlantDisplay","plant","Capacity","topPlants","selectPlant","MineInfo","mineInfo","coalMineImage","colorScheme","Status","mt","as","lineHeight","isTruncated","marginTop","marginLeft","Grade","href","Wiki","isExternal","PlantInfo","plantInfo","coalPlantImage","MinePlantSidebar","setMine","setPlant","object","steps","selector","backgroundColor","App","isTourOpen","setIsTourOpen","setClickedPort","setIsPortClicked","getActivePort","mtData","className","maxHeight","maxWidth","w","h","templateRows","templateColumns","gap","colStart","colEnd","rowStart","rowEnd","borderWidth","borderColor","shadow","padding","rowSpan","colSpan","overflow","orientation","isOpen","onRequestClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9fc54175.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/3d9519a9c80c0149c2accf244a88c4d8/raw/mines.csv\";\n\nexport const useMines = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/e3d8ba2ec55191b1049d457711a3162f/raw/coalPlants.csv\";\n\nexport const useCoalPlants = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { Button } from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\n\nconst MapControlButton = (props) => {\n  const [active, setActive] = useState(false);\n\n  const onClick = () => {\n    setActive(!active);\n\n    props.onClick();\n  };\n\n  if (active === true) {\n    return (\n      <Button\n        height=\"6\"\n        fontSize=\"sm\"\n        bg=\"black\"\n        color=\"white\"\n        _hover={{ bg: \"gray\" }}\n        onClick={onClick}\n      >\n        {props.children}\n      </Button>\n    );\n  } else {\n    return (\n      <Button height=\"6\" fontSize=\"sm\" onClick={onClick}>\n        {props.children}\n      </Button>\n    );\n  }\n};\n\nexport default MapControlButton;\n","import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport * as d3 from \"d3\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport { Stack } from \"@chakra-ui/react\";\n\nimport { usePorts } from \"../loaders/usePorts\";\nimport { useFlows } from \"../loaders/useFlows\";\nimport { useCountries } from \"../loaders/useCountries\";\nimport { useCountryFlows } from \"../loaders/useCountryFlows\";\nimport { pointer } from \"d3\";\nimport { Spinner } from \"@chakra-ui/react\";\nimport { useMines } from \"../loaders/useMines\";\nimport { useCoalPlants } from \"../loaders/useCoalPlants\";\nimport MapControlButton from \"./MapControlButton.js\";\n\nimport \"../styles/portTooltip.css\";\n\nconst Map = (props) => {\n  const [tooltipPosition, setTooltipPosition] = useState([0, 0]);\n  const [minesActive, setMinesActive] = useState(false);\n  const [plantsActive, setPlantsActive] = useState(false);\n\n  const loadPorts = usePorts();\n  const loadFlows = useFlows();\n  const loadCountries = useCountries();\n  const loadCountryFlows = useCountryFlows();\n  const mines = useMines();\n  const plants = useCoalPlants();\n\n  if (\n    !loadPorts ||\n    !loadFlows ||\n    !loadCountries ||\n    !loadCountryFlows ||\n    !mines ||\n    !plants\n  ) {\n    return (\n      <pre>\n        <Spinner color=\"#38B2AC\" />\n      </pre>\n    );\n  }\n\n  var allPorts = loadPorts;\n  var allFlows = loadFlows;\n  var countryNodes = loadCountries;\n  var countryFlows = loadCountryFlows;\n\n  if (props.levelSelected !== \"Ports\") {\n    allPorts = countryNodes;\n    allFlows = countryFlows;\n  }\n\n  const D3Layer = () => {\n    const map = useMap();\n\n    d3.select(map.getPanes().overlayPane).selectAll(\"*\").remove();\n\n    L.svg({ clickable: true }).addTo(map);\n\n    useEffect(() => {\n      var flows = allFlows.filter(\n        (flows) =>\n          +flows.Year === props.yearSelected &&\n          flows.Commodity === props.commoditySelected\n      );\n\n      var ports = allPorts.filter(\n        (port) =>\n          +port.Year === props.yearSelected &&\n          port.Commodity === props.commoditySelected\n      );\n\n      props.setPortData(allPorts);\n      props.setFlowData(allFlows);\n\n      const overlay = d3.select(map.getPanes().overlayPane);\n\n      const svg = overlay.select(\"svg\").attr(\"pointer-events\", \"auto\");\n\n      const linkLayer = svg.append(\"g\");\n      const portLayer = svg.append(\"g\");\n\n      const portTooltip = overlay\n        .append(\"div\")\n        .attr(\"id\", \"portTooltip\")\n        .style(\"left\", tooltipPosition[0] + 30 + \"px\")\n        .style(\"top\", tooltipPosition[1] + 30 + \"px\");\n\n      function mouseover(event, d) {\n        d3.select(this).attr(\"fill-opacity\", 1).style(\"cursor\", \"pointer\");\n\n        var flowNum = +d.flow;\n        var displayFlow =\n          flowNum > 0 ? flowNum.toFixed(2) : -flowNum.toFixed(2);\n\n        var importExport = +d.flow > 0 ? \"Export\" : \"Import\";\n\n        portTooltip\n          .html(\n            `<p style=\"font-size: 1.5em\"><b>${d.Port}</b></p>\n            <p>${importExport}: ${displayFlow} megatonnes</p>\n            <p><b>Click</b> to see more details.</p>`\n          )\n          .style(\"opacity\", 1);\n\n        const sourcePort = d.Port;\n\n        if (d.flow > 0) {\n          var flowData = flows.filter((flow) => flow.source === sourcePort);\n        } else {\n          flowData = flows.filter((flow) => flow.target === sourcePort);\n        }\n\n        function pathDraw(sourceCoords, targetCoords) {\n          var source = map.latLngToLayerPoint(sourceCoords),\n            target = map.latLngToLayerPoint(targetCoords),\n            dx = source.x - target.x,\n            dy = source.y - target.y;\n\n          var sx = 0.4,\n            sy = 0.1;\n\n          if (dy < 0) {\n            var controls = [sx * dx, sy * dy, sx * dx, sy * dy];\n          } else {\n            controls = [sy * dx, sx * dy, sy * dx, sx * dy];\n          }\n\n          return (\n            \"M\" +\n            source.x +\n            \",\" +\n            source.y +\n            \"C\" +\n            (source.x - controls[0]) +\n            \",\" +\n            (source.y - controls[1]) +\n            \" \" +\n            (target.x + controls[2]) +\n            \",\" +\n            (target.y + controls[3]) +\n            \" \" +\n            target.x +\n            \",\" +\n            target.y\n          );\n        }\n\n        var Links = linkLayer.selectAll(\"path\").data(flowData);\n\n        Links.enter()\n          .append(\"path\")\n          .attr(\"class\", \"links\")\n          .attr(\"id\", (d) => {\n            return d.flow > 0 ? d.target : d.source;\n          })\n          .attr(\"d\", (d) => {\n            var sourcePort = allPorts.filter((port) => port.Port === d.source);\n            var targetPort = allPorts.filter((port) => port.Port === d.target);\n            var sourceCoords = [sourcePort[0].lat, sourcePort[0].lon];\n            var targetCoords = [targetPort[0].lat, targetPort[0].lon];\n\n            return pathDraw(sourceCoords, targetCoords);\n          })\n          .style(\"fill\", \"none\")\n          .style(\"stroke\", (d) => {\n            return importExport === \"Export\" ? \"tomato\" : \"#38B2AC\";\n          })\n          .style(\"stroke-width\", (d) => {\n            var width = +d.flow > 0 ? d.flow : -d.flow;\n            if (props.levelSelected === \"Ports\") {\n              return width + \"px\";\n            } else {\n              return width / 2 + \"px\";\n            }\n          })\n          .style(\"opacity\", 0.6);\n\n        Links.exit().remove();\n      }\n\n      function mouseleave(event, d) {\n        d3.select(this)\n          .transition()\n          .duration(\"150\")\n          .attr(\"fill-opacity\", 0.4)\n          .style(\"cursor\", \"default\");\n\n        portTooltip\n          .style(\"opacity\", 0)\n          .style(\"left\", 0 + \"px\")\n          .style(\"top\", 0 + \"px\");\n\n        linkLayer.selectAll(\"path\").remove();\n      }\n\n      function mousemove(event, d) {\n        portTooltip\n          .style(\"left\", pointer(event)[0] + 30 + \"px\")\n          .style(\"top\", pointer(event)[1] + 30 + \"px\");\n      }\n\n      function click(event, d) {\n        setTooltipPosition([pointer(event)[0], pointer(event)[1]]);\n\n        props.isPortClicked(\"TRUE\");\n        props.onSelectPort(d);\n      }\n\n      var Dots = portLayer\n        .selectAll(\"circle\")\n        .attr(\"class\", \"Dots\")\n        .data(ports)\n        .join(\"circle\")\n        .attr(\"id\", \"Ports\")\n        .attr(\"fill\", (d) => (+d[\"flow\"] < 0 ? \"#38B2AC\" : \"tomato\"))\n        .attr(\"stroke\", \"black\")\n        .attr(\"fill-opacity\", 0.4)\n        .attr(\"cx\", (d) => {\n          return map.latLngToLayerPoint([d.lat, d.lon]).x;\n        })\n        .attr(\"cy\", (d) => map.latLngToLayerPoint([d.lat, d.lon]).y)\n        .attr(\"r\", (d) => {\n          var radius = +d.flow > 0 ? d.flow : -d.flow;\n\n          if (props.levelSelected === \"Ports\") {\n            return Math.sqrt(20 * +radius);\n          } else {\n            return Math.sqrt(10 * +radius);\n          }\n        })\n        .on(\"mouseover\", mouseover)\n        .on(\"mouseleave\", mouseleave)\n        .on(\"click\", click)\n        .on(\"mousemove\", mousemove);\n\n      const update = () =>\n        Dots.attr(\"cx\", (d) => map.latLngToLayerPoint([d.lat, d.lon]).x).attr(\n          \"cy\",\n          (d) => map.latLngToLayerPoint([d.lat, d.lon]).y\n        );\n\n      map.on(\"zoomend\", update);\n    }, [map]);\n\n    return null;\n  };\n\n  const minesOnOff = () => {\n    setMinesActive(!minesActive);\n  };\n\n  const plantsOnOff = () => {\n    setPlantsActive(!plantsActive);\n  };\n\n  const CoalMines = () => {\n    const map = useMap();\n\n    const overlay = d3.select(map.getPanes().overlayPane);\n\n    const MineTooltip = overlay\n      .append(\"div\")\n      .attr(\"id\", \"minePlantTooltip\")\n      .style(\"left\", 0 + \"px\")\n      .style(\"top\", 0 + \"px\");\n\n    if (minesActive === false) {\n      return null;\n    } else {\n      const svg = overlay.select(\"svg\").attr(\"pointer-events\", \"auto\");\n\n      const mineLayer = svg.append(\"g\");\n\n      function mouseover(event, d) {\n        d3.select(this).style(\"cursor\", \"pointer\");\n\n        MineTooltip.html(`<p style=\"font-size: 1em\"><b>${d.Name}</p>`).style(\n          \"opacity\",\n          1\n        );\n      }\n\n      function mouseleave(event, d) {\n        d3.select(this).style(\"cursor\", \"default\");\n\n        MineTooltip.style(\"opacity\", 0)\n          .style(\"left\", 0 + \"px\")\n          .style(\"top\", 0 + \"px\");\n\n        mineLayer.selectAll(\"path\").remove();\n      }\n\n      function mousemove(event, d) {\n        MineTooltip.style(\"left\", pointer(event)[0] + 15 + \"px\").style(\n          \"top\",\n          pointer(event)[1] + 15 + \"px\"\n        );\n      }\n\n      var MineMarkers = mineLayer\n        .selectAll(\"circle\")\n        .attr(\"class\", \"Dots\")\n        .data(mines)\n        .join(\"circle\")\n        .attr(\"id\", \"Plants\")\n        .attr(\"fill\", \"brown\")\n        .attr(\"fill-opacity\", 1)\n        .attr(\"cx\", (d) => {\n          return map.latLngToLayerPoint([d.Latitude, d.Longitude]).x;\n        })\n        .attr(\"cy\", (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).y)\n        .attr(\"r\", 3)\n        .on(\"mouseover\", mouseover)\n        .on(\"mouseleave\", mouseleave)\n        .on(\"mousemove\", mousemove);\n\n      const update = () =>\n        MineMarkers.attr(\n          \"cx\",\n          (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).x\n        ).attr(\n          \"cy\",\n          (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).y\n        );\n\n      map.on(\"zoomend\", update);\n\n      return null;\n    }\n  };\n\n  const CoalPlants = () => {\n    const map = useMap();\n\n    const overlay = d3.select(map.getPanes().overlayPane);\n\n    const PlantTooltip = overlay\n      .append(\"div\")\n      .attr(\"id\", \"minePlantTooltip\")\n      .style(\"left\", 0 + \"px\")\n      .style(\"top\", 0 + \"px\");\n\n    if (plantsActive === false) {\n      return null;\n    } else {\n      const svg = overlay.select(\"svg\").attr(\"pointer-events\", \"auto\");\n\n      const mineLayer = svg.append(\"g\");\n\n      function mouseover(event, d) {\n        d3.select(this).style(\"cursor\", \"pointer\");\n\n        PlantTooltip.html(`<p style=\"font-size: 1em\"><b>${d.Name}</p>`).style(\n          \"opacity\",\n          1\n        );\n      }\n\n      function mouseleave(event, d) {\n        d3.select(this).style(\"cursor\", \"default\");\n\n        PlantTooltip.style(\"opacity\", 0)\n          .style(\"left\", 0 + \"px\")\n          .style(\"top\", 0 + \"px\");\n\n        mineLayer.selectAll(\"path\").remove();\n      }\n\n      function mousemove(event, d) {\n        PlantTooltip.style(\"left\", pointer(event)[0] + 15 + \"px\").style(\n          \"top\",\n          pointer(event)[1] + 15 + \"px\"\n        );\n      }\n\n      var PlantMarkers = mineLayer\n        .selectAll(\"circle\")\n        .attr(\"class\", \"Dots\")\n        .data(plants)\n        .join(\"circle\")\n        .attr(\"id\", \"Plants\")\n        .attr(\"fill\", \"#212b57\")\n        .attr(\"fill-opacity\", 1)\n        .attr(\"cx\", (d) => {\n          return map.latLngToLayerPoint([d.Latitude, d.Longitude]).x;\n        })\n        .attr(\"cy\", (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).y)\n        .attr(\"r\", 3)\n        .on(\"mouseover\", mouseover)\n        .on(\"mouseleave\", mouseleave)\n        .on(\"mousemove\", mousemove);\n\n      const update = () =>\n        PlantMarkers.attr(\n          \"cx\",\n          (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).x\n        ).attr(\n          \"cy\",\n          (d) => map.latLngToLayerPoint([d.Latitude, d.Longitude]).y\n        );\n\n      map.on(\"zoomend\", update);\n\n      return null;\n    }\n  };\n\n  return (\n    <>\n      <MapContainer\n        id=\"mainMap\"\n        style={{ height: \"100%\" }}\n        center={[5, 18]}\n        zoom={2}\n        scrollWheelZoom={true}\n        zIndex=\"100\"\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n          url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\n        />\n        <D3Layer />\n        <CoalMines />\n        <CoalPlants />\n      </MapContainer>\n      <Stack\n        direction=\"row\"\n        position=\"absolute\"\n        top=\"10px\"\n        right=\"20px\"\n        zIndex=\"500\"\n      >\n        <MapControlButton onClick={minesOnOff}>Show mines</MapControlButton>\n        <MapControlButton onClick={plantsOnOff}>\n          Show power plants\n        </MapControlButton>\n      </Stack>\n    </>\n  );\n};\n\nexport default Map;\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/bd1bf080322618e46ad6a5552d646105/raw/ports.csv\";\n\nexport const usePorts = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/43b07a35f49cb3b74c1a93ed2c809961/raw/flows.csv\";\n\nexport const useFlows = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/56d12817f6462bf7cd782d423b86ac11/raw/country_nodes.csv\";\n\nexport const useCountries = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/4e4596e8863543d99182de35c7855660/raw/country_flows.csv\";\n\nexport const useCountryFlows = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import { Text } from \"recharts\";\n\nconst CustomLabel = (props) => {\n  return (\n    <Text\n      fontSize=\"0.6em\"\n      x={props.x - 5}\n      y={props.y + props.height / 2}\n      width={95}\n      textAnchor=\"end\"\n      verticalAnchor=\"middle\"\n      dominantBaseline=\"middle\"\n    >\n      {props.value}\n    </Text>\n  );\n};\n\nexport default CustomLabel;\n","import { Text } from \"recharts\";\nimport { useCountryMapping } from \"../loaders/useCountryMapping.js\";\n\nconst CustomLabelCountry = (props) => {\n  const countryMapping = useCountryMapping();\n\n  if (!countryMapping) {\n    return null;\n  }\n\n  const getCountry = () => {\n    var port = countryMapping.filter((port) => port.Port === props.value);\n\n    return port[0].Country;\n  };\n\n  return (\n    <>\n      <Text\n        fontSize=\"0.6em\"\n        x={props.x - 5}\n        y={props.y + props.height / 2}\n        width={95}\n        textAnchor=\"end\"\n        verticalAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        {props.value}\n        {` ${getCountry()}`}\n      </Text>\n    </>\n  );\n};\n\nexport default CustomLabelCountry;\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/Nfuu/c4c4fa01b7a10184d22a15eeeba4920b/raw/port_country_mapping.csv\";\n\nexport const useCountryMapping = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(csvUrl).then(setData);\n  }, []);\n\n  return data;\n};\n","import React, { useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  ResponsiveContainer,\n  YAxis,\n  XAxis,\n  LabelList,\n  Cell,\n} from \"recharts\";\nimport { Box, Heading } from \"@chakra-ui/react\";\nimport CustomLabel from \"./CustomLabel.js\";\nimport CustomLabelCountry from \"./CustomLabelCountry.js\";\n\nconst formatFlowNumber = (num) => {\n  var number = parseFloat(num.flow);\n  var decimals = number.toFixed(2);\n\n  return parseFloat(decimals);\n};\n\nconst ExportPortGraph = (props) => {\n  const flowData = props.flowData;\n  const portData = props.portData;\n  const [activeIndex, setActiveIndex] = useState(null);\n\n  if (!flowData || !portData) {\n    return null;\n  }\n\n  const flows = flowData.filter(\n    (flow) =>\n      +flow.Year === props.year &&\n      flow.Commodity === props.commodity &&\n      flow.source === props.sourcePort\n  );\n\n  flows.sort((a, b) => parseFloat(b.flow) - parseFloat(a.flow));\n\n  flows.forEach((flow) => {\n    flow.flow = formatFlowNumber(flow);\n  });\n\n  const handleClick = (data, index) => {\n    const clickedPortInfo = portData.filter(\n      (port) =>\n        +port.Year === props.year &&\n        port.Commodity === props.commodity &&\n        port.Port === data.target\n    );\n\n    props.setNewPort(clickedPortInfo[0]);\n    setActiveIndex(index);\n  };\n\n  return (\n    <>\n      <Box height=\"100%\" width=\"100%\">\n        <Heading size=\"sm\">{`${props.commodity} coal exports (in Mts)`}</Heading>\n        <ResponsiveContainer width=\"100%\" height=\"90%\">\n          <BarChart\n            data={flows.slice(0, 10)}\n            layout=\"vertical\"\n            margin={{\n              top: 10,\n              right: 30,\n              left: 120,\n              bottom: 5,\n            }}\n          >\n            <XAxis type=\"number\" hide />\n            <YAxis type=\"category\" hide />\n            <Bar dataKey=\"flow\" onClick={handleClick}>\n              {flows.slice(0, 10).map((entry, index) => (\n                <Cell\n                  cursor=\"pointer\"\n                  fill={index === activeIndex ? \"gray\" : \"#38B2AC\"}\n                  key={`cell-${index}`}\n                />\n              ))}\n              <LabelList\n                dataKey=\"flow\"\n                position=\"right\"\n                style={{\n                  fontSize: \"0.6em\",\n                  fill: \"#000\",\n                }}\n              />\n              <LabelList\n                dataKey=\"target\"\n                position=\"left\"\n                content={\n                  props.level === \"Ports\" ? (\n                    <CustomLabelCountry />\n                  ) : (\n                    <CustomLabel />\n                  )\n                }\n                style={{ fontSize: \"0.6em\" }}\n              />\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      </Box>\n    </>\n  );\n};\n\nexport default ExportPortGraph;\n","import React, { useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  ResponsiveContainer,\n  YAxis,\n  XAxis,\n  LabelList,\n  Cell,\n} from \"recharts\";\nimport { Box, Heading } from \"@chakra-ui/react\";\nimport CustomLabel from \"./CustomLabel.js\";\nimport CustomLabelCountry from \"./CustomLabelCountry.js\";\n\nconst formatFlowNumber = (num) => {\n  var number = parseFloat(num.flow);\n  var decimals = number.toFixed(2);\n\n  return parseFloat(decimals);\n};\n\nconst ExportPortGraph = (props) => {\n  const flowData = props.flowData;\n  const portData = props.portData;\n  const [activeIndex, setActiveIndex] = useState(null);\n\n  if (!flowData || !portData) {\n    return null;\n  }\n\n  const flows = flowData.filter(\n    (flow) =>\n      +flow.Year === props.year &&\n      flow.Commodity === props.commodity &&\n      flow.target === props.targetPort\n  );\n\n  flows.sort((a, b) => parseFloat(b.flow) - parseFloat(a.flow));\n\n  flows.forEach((flow) => {\n    flow.flow = formatFlowNumber(flow);\n  });\n\n  const handleClick = (data, index) => {\n    const clickedPortInfo = portData.filter(\n      (port) =>\n        +port.Year === props.year &&\n        port.Commodity === props.commodity &&\n        port.Port === data.source\n    );\n\n    props.setNewPort(clickedPortInfo[0]);\n    setActiveIndex(index);\n  };\n\n  return (\n    <>\n      <Box height=\"100%\" width=\"100%\">\n        <Heading size=\"sm\">{`${props.commodity} coal imports (in Mts)`}</Heading>\n        <ResponsiveContainer width=\"100%\" height=\"90%\">\n          <BarChart\n            data={flows.slice(0, 10)}\n            layout=\"vertical\"\n            margin={{\n              top: 10,\n              right: 30,\n              left: 120,\n              bottom: 5,\n            }}\n          >\n            <XAxis type=\"number\" hide />\n            <YAxis type=\"category\" hide />\n            <Bar dataKey=\"flow\" onClick={handleClick}>\n              {flows.slice(0, 10).map((entry, index) => (\n                <Cell\n                  cursor=\"pointer\"\n                  fill={index === activeIndex ? \"gray\" : \"tomato\"}\n                  key={`cell-${index}`}\n                />\n              ))}\n              <LabelList\n                dataKey=\"flow\"\n                position=\"right\"\n                style={{\n                  fontSize: \"0.6em\",\n                  fill: \"#000\",\n                }}\n              />\n              <LabelList\n                dataKey=\"source\"\n                position=\"left\"\n                content={\n                  props.level === \"Ports\" ? (\n                    <CustomLabelCountry />\n                  ) : (\n                    <CustomLabel />\n                  )\n                }\n                style={{ fontSize: \"0.6em\" }}\n              />\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      </Box>\n    </>\n  );\n};\n\nexport default ExportPortGraph;\n","import { PieChart, Pie, Cell, ResponsiveContainer } from \"recharts\";\nimport { Heading, Box, Center, List, ListItem, Icon } from \"@chakra-ui/react\";\n\nimport \"../styles/legend.css\";\n\nconst COLORS = [\"gray\", \"brown\", \"black\"];\n\nconst PortInfo = (props) => {\n  const portData = props.portData;\n\n  if (!portData || !props.selectedPort || !props.year) {\n    return null;\n  }\n\n  const filterData = portData.filter(\n    (port) => +port.Year === props.year && port.Port === props.selectedPort\n  );\n\n  const data = filterData.map((obj) => ({ ...obj }));\n\n  data.forEach((port) => {\n    port.flow = Math.abs(+port.flow);\n  });\n\n  const getFlowCommodity = (commodity) => {\n    const commodityFiltered = data.filter(\n      (port) => port.Commodity === commodity\n    );\n\n    try {\n      const flow = commodityFiltered[0].flow;\n      return flow;\n    } catch (error) {\n      return null;\n    }\n  };\n\n  const commodityData = [\n    {\n      Commodity: \"Metallurgical\",\n      flow: getFlowCommodity(\"Metallurgical\"),\n    },\n    {\n      Commodity: \"Thermal\",\n      flow: getFlowCommodity(\"Thermal\"),\n    },\n    {\n      Commodity: \"Unspecified\",\n      flow:\n        getFlowCommodity(\"Total\") -\n        (getFlowCommodity(\"Metallurgical\") + getFlowCommodity(\"Thermal\")),\n    },\n  ];\n\n  return (\n    <>\n      <Box\n        height=\"100%\"\n        width=\"100%\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n      >\n        <Heading size=\"sm\">{`${props.selectedPort} commodity breakdown`}</Heading>\n        <ResponsiveContainer height={130} width=\"100%\">\n          <PieChart height={130}>\n            <Pie\n              data={commodityData}\n              innerRadius={20}\n              outerRadius={50}\n              dataKey=\"flow\"\n              nameKey=\"Commodity\"\n            >\n              {commodityData.map((entry, index) => (\n                <Cell\n                  key={`cell-${index}`}\n                  fill={COLORS[index % COLORS.length]}\n                />\n              ))}\n            </Pie>\n          </PieChart>\n        </ResponsiveContainer>\n        <Box></Box>\n        <Center>\n          <List>\n            <ListItem fontSize=\"sm\">\n              <Icon viewBox=\"0 0 200 200\" color=\"gray\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\"\n                />\n              </Icon>\n              Metallurgical coal\n            </ListItem>\n            <ListItem fontSize=\"sm\">\n              <Icon viewBox=\"0 0 200 200\" color=\"brown\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\"\n                />\n              </Icon>\n              Thermal coal\n            </ListItem>\n            <ListItem fontSize=\"sm\">\n              <Icon viewBox=\"0 0 200 200\" color=\"black\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\"\n                />\n              </Icon>\n              Unspecified coal\n            </ListItem>\n          </List>\n        </Center>\n      </Box>\n    </>\n  );\n};\n\nexport default PortInfo;\n","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport { VStack, Box, Image } from \"@chakra-ui/react\";\nimport ExportPortGraph from \"./ExportPortGraph.js\";\nimport ImportPortGraph from \"./ImportPortGraph.js\";\nimport PortInfo from \"./PortInfo.js\";\n\nimport EmberLogo from \"../images/Ember-logo.png\";\n\nconst PortLinkSidebar = (props) => {\n  const selectedPort = props.clickedPort;\n  const portName = selectedPort.Port;\n\n  if (+selectedPort.flow > 0) {\n    var flowDirection = \"Export\";\n  } else {\n    flowDirection = \"Import\";\n  }\n\n  if (flowDirection === \"Export\") {\n    return (\n      <>\n        <VStack height=\"100%\" width=\"100%\" spacing=\"20px\">\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <ExportPortGraph\n              sourcePort={portName}\n              flowData={props.flowData}\n              portData={props.portData}\n              year={props.yearSelected}\n              level={props.levelSelected}\n              commodity={props.commoditySelected}\n              setNewPort={props.setNewPort}\n            />\n          </Box>\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <PortInfo\n              selectedPort={portName}\n              portData={props.portData}\n              year={props.yearSelected}\n            />\n          </Box>\n        </VStack>\n        <Image\n          src={EmberLogo}\n          position=\"absolute\"\n          bottom=\"10px\"\n          left=\"10px\"\n          width=\"80%\"\n        />\n      </>\n    );\n  } else {\n    return (\n      <>\n        <VStack height=\"100%\" width=\"100%\" spacing=\"20px\">\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <ImportPortGraph\n              targetPort={portName}\n              flowData={props.flowData}\n              portData={props.portData}\n              year={props.yearSelected}\n              level={props.levelSelected}\n              commodity={props.commoditySelected}\n              setNewPort={props.setNewPort}\n            />\n          </Box>\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <PortInfo\n              selectedPort={portName}\n              portData={props.portData}\n              year={props.yearSelected}\n            />\n          </Box>\n        </VStack>\n        <Image\n          src={EmberLogo}\n          position=\"absolute\"\n          bottom=\"10px\"\n          left=\"20px\"\n          width=\"80%\"\n        />\n      </>\n    );\n  }\n};\n\nexport default PortLinkSidebar;\n","import {\n  VStack,\n  Text,\n  Slider,\n  SliderTrack,\n  SliderFilledTrack,\n  SliderThumb,\n} from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\n\nconst YearSelector = (props) => {\n  const [year, setYear] = useState(2020);\n\n  const handleYearChange = (val) => {\n    setYear(val);\n    props.onSelectYear(year);\n  };\n\n  return (\n    <>\n      <VStack width=\"100%\" spacing={2}>\n        <Text fontSize=\"2xl\" fontWeight=\"semibold\" color=\"#000\">\n          {year}\n        </Text>\n        <Slider\n          width=\"80%\"\n          aria-label=\"yearSlider\"\n          defaultValue={2020}\n          min={2017}\n          max={2020}\n          step={1}\n          onChangeEnd={(val) => handleYearChange(val)}\n        >\n          <SliderTrack bg=\"#1D77b7\">\n            <SliderFilledTrack bg=\"#212b57\" />\n          </SliderTrack>\n          <SliderThumb boxSize={4} bgColor=\"gray.200\" />\n        </Slider>\n      </VStack>\n    </>\n  );\n};\n\nexport default YearSelector;\n","import { Radio, RadioGroup, Stack } from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\n\nconst CommoditySelector = (props) => {\n  const [commodity, setCommodity] = useState(\"Thermal\");\n\n  const handleSelection = (val) => {\n    setCommodity(val);\n\n    props.onSelectCommodity(val);\n  };\n\n  return (\n    <RadioGroup onChange={handleSelection} value={commodity}>\n      <Stack direction=\"row\" color=\"gray.600\">\n        <Radio value=\"Total\">Total</Radio>\n        <Radio value=\"Thermal\">Thermal</Radio>\n        <Radio value=\"Metallurgical\">Metallurgical</Radio>\n      </Stack>\n    </RadioGroup>\n  );\n};\n\nexport default CommoditySelector;\n","import { Center, Stat, StatLabel, StatNumber } from \"@chakra-ui/react\";\n\nconst MtDisplay = (props) => {\n  const mtAmount = +props.mtAmount;\n  const displayAmount = Math.abs(mtAmount.toFixed(2));\n\n  if (mtAmount > 0) {\n    var displayText = \"Exports in megatonnes:\";\n  } else {\n    displayText = \"Imports in megatonnes:\";\n  }\n\n  return (\n    <Center>\n      <Stat>\n        <StatLabel color=\"gray.600\">{displayText}</StatLabel>\n        <StatNumber>{`${displayAmount} Mt`}</StatNumber>\n      </Stat>\n    </Center>\n  );\n};\n\nexport default MtDisplay;\n","import { Center, Stat, StatLabel, StatNumber, Tooltip } from \"@chakra-ui/react\";\nimport { InfoOutlineIcon } from \"@chakra-ui/icons\";\n\nconst CO2Display = (props) => {\n  const CO2Amount = Math.abs((+props.mtAmount * 2.86).toFixed(2));\n\n  return (\n    <>\n      <Center>\n        <Stat>\n          <StatLabel color=\"gray.600\">CO2 emissions from use:</StatLabel>\n          <StatNumber>{`${CO2Amount} Mt CO2`}</StatNumber>\n        </Stat>\n      </Center>\n      <Tooltip\n        label=\"CO2 is calculated by multiplying the megatonnes of coal by a factor of 2.86\"\n        placement=\"right\"\n        bgColor=\"#212b57\"\n      >\n        <InfoOutlineIcon position=\"absolute\" top=\"10px\" right=\"10px\" />\n      </Tooltip>\n    </>\n  );\n};\n\nexport default CO2Display;\n","import { Radio, RadioGroup, Stack } from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\n\nconst LevelSelector = (props) => {\n  const [level, setLevel] = useState(\"Ports\");\n\n  const handleSelection = (val) => {\n    setLevel(val);\n\n    props.onSelectLevel(val);\n    props.isPortClicked(\"FALSE\");\n  };\n\n  return (\n    <RadioGroup onChange={handleSelection} value={level}>\n      <Stack direction=\"row\" color=\"gray.600\">\n        <Radio value=\"Countries\">Country</Radio>\n        <Radio value=\"Ports\">Ports</Radio>\n      </Stack>\n    </RadioGroup>\n  );\n};\n\nexport default LevelSelector;\n","import React from \"react\";\nimport { VStack, Badge, Flex, Text } from \"@chakra-ui/react\";\n\nconst PortDisplay = (props) => {\n  const selectedPort = props.clickedPort;\n  const portName = selectedPort.Port;\n\n  if (+selectedPort.flow > 0) {\n    var flowDirection = \"Export\";\n    var badgeColor = \"tomato\";\n  } else {\n    flowDirection = \"Import\";\n    badgeColor = \"#38B2AC\";\n  }\n\n  return (\n    <>\n      <Flex display=\"flex\" alignItems=\"center\">\n        <VStack>\n          <Text\n            fontSize=\"xl\"\n            fontWeight=\"semibold\"\n            color=\"gray.600\"\n            textAlign=\"center\"\n          >\n            {props.level === \"Ports\"\n              ? `${portName}, ${selectedPort.Country}`\n              : `${portName}`}\n          </Text>\n          <Badge borderRadius=\"full\" px=\"2\" bgColor={badgeColor} color=\"white\">\n            {flowDirection}\n          </Badge>\n        </VStack>\n      </Flex>\n    </>\n  );\n};\n\nexport default PortDisplay;\n","import React from \"react\";\nimport { useMines } from \"../loaders/useMines\";\nimport {\n  BarChart,\n  Bar,\n  ResponsiveContainer,\n  YAxis,\n  XAxis,\n  LabelList,\n  Cell,\n} from \"recharts\";\nimport { Heading, Box } from \"@chakra-ui/react\";\nimport CustomLabel from \"./CustomLabel.js\";\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2 - lat1); // deg2rad below\n  var dLon = deg2rad(lon2 - lon1);\n  var a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(deg2rad(lat1)) *\n      Math.cos(deg2rad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  var d = R * c; // Distance in km\n  return d;\n};\n\nconst deg2rad = (deg) => {\n  return deg * (Math.PI / 180);\n};\n\nconst MineDisplay = (props) => {\n  const mines = useMines();\n\n  if (!mines) {\n    return <pre>Loading...</pre>;\n  }\n\n  const port = props.sourcePort;\n\n  mines.forEach((mine) => {\n    mine.Distance = getDistance(\n      port.lat,\n      port.lon,\n      mine.Latitude,\n      mine.Longitude\n    );\n\n    mine.Output = parseFloat(mine.Output);\n  });\n\n  mines.sort((a, b) => parseFloat(a.Distance) - parseFloat(b.Distance));\n\n  if (props.commodity === \"Thermal\") {\n    var commodityMines = mines.filter((mine) => mine.Thermal === \"TRUE\");\n  } else if (props.commodity === \"Metallurgical\") {\n    commodityMines = mines.filter((mine) => mine.Metallurgical === \"TRUE\");\n  } else {\n    commodityMines = mines;\n  }\n\n  const topMines = commodityMines.slice(0, 10);\n\n  const handleClick = (data, index) => {\n    props.selectMine(data);\n  };\n\n  const getHeadingText = () => {\n    if (props.commodity === \"Total\") {\n      return \"\";\n    } else {\n      return props.commodity;\n    }\n  };\n\n  return (\n    <>\n      <Box height=\"100%\" width=\"100%\">\n        <Heading size=\"sm\">{`Closest ${getHeadingText().toLowerCase()} coal mines`}</Heading>\n        <ResponsiveContainer width=\"100%\" height=\"90%\">\n          <BarChart\n            data={topMines}\n            layout=\"vertical\"\n            margin={{\n              top: 10,\n              right: 30,\n              left: 120,\n              bottom: 5,\n            }}\n          >\n            <XAxis type=\"number\" hide />\n            <YAxis type=\"category\" hide />\n            <Bar\n              dataKey=\"Output\"\n              onClick={handleClick}\n              isAnimationActive={false}\n            >\n              {topMines.map((entry, index) => (\n                <Cell cursor=\"pointer\" fill=\"#212b57\" key={`cell-${index}`} />\n              ))}\n              <LabelList\n                dataKey=\"Output\"\n                position=\"right\"\n                style={{\n                  fontSize: \"0.6em\",\n                  fill: \"#000\",\n                }}\n              />\n              <LabelList\n                dataKey=\"Name\"\n                position=\"left\"\n                content={<CustomLabel />}\n                style={{ fontSize: \"0.6em\" }}\n              />\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      </Box>\n    </>\n  );\n};\n\nexport default MineDisplay;\n","import React from \"react\";\nimport { useCoalPlants } from \"../loaders/useCoalPlants\";\nimport {\n  BarChart,\n  Bar,\n  ResponsiveContainer,\n  YAxis,\n  XAxis,\n  LabelList,\n  Cell,\n} from \"recharts\";\nimport { Heading, Box, Spinner } from \"@chakra-ui/react\";\nimport CustomLabel from \"./CustomLabel.js\";\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2 - lat1); // deg2rad below\n  var dLon = deg2rad(lon2 - lon1);\n  var a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(deg2rad(lat1)) *\n      Math.cos(deg2rad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  var d = R * c; // Distance in km\n  return d;\n};\n\nconst deg2rad = (deg) => {\n  return deg * (Math.PI / 180);\n};\n\nconst PlantDisplay = (props) => {\n  const plants = useCoalPlants();\n\n  if (!plants) {\n    return (\n      <pre>\n        <Spinner color=\"#38B2AC\" />\n      </pre>\n    );\n  }\n\n  const port = props.sourcePort;\n\n  plants.forEach((plant) => {\n    plant.Distance = getDistance(\n      port.lat,\n      port.lon,\n      plant.Latitude,\n      plant.Longitude\n    );\n\n    plant.Capacity = parseFloat(plant.Capacity);\n  });\n\n  plants.sort((a, b) => parseFloat(a.Distance) - parseFloat(b.Distance));\n\n  const topPlants = plants.slice(0, 10);\n\n  const handleClick = (data, index) => {\n    props.selectPlant(data);\n  };\n\n  return (\n    <>\n      <Box height=\"100%\" width=\"100%\">\n        <Heading size=\"sm\">Closest coal power plants</Heading>\n        <ResponsiveContainer width=\"100%\" height=\"90%\">\n          <BarChart\n            data={topPlants}\n            layout=\"vertical\"\n            margin={{\n              top: 10,\n              right: 30,\n              left: 120,\n              bottom: 5,\n            }}\n          >\n            <XAxis type=\"number\" hide />\n            <YAxis type=\"category\" hide />\n            <Bar dataKey=\"Capacity\" onClick={handleClick}>\n              {topPlants.map((entry, index) => (\n                <Cell cursor=\"pointer\" fill=\"#212b57\" key={`cell-${index}`} />\n              ))}\n              <LabelList\n                dataKey=\"Capacity\"\n                position=\"right\"\n                style={{\n                  fontSize: \"0.6em\",\n                  fill: \"#000\",\n                }}\n              />\n              <LabelList\n                dataKey=\"Name\"\n                position=\"left\"\n                content={<CustomLabel />}\n                style={{ fontSize: \"0.6em\" }}\n              />\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      </Box>\n    </>\n  );\n};\n\nexport default PlantDisplay;\n","export default __webpack_public_path__ + \"static/media/Coal_mine.f8b35831.png\";","import {\n  Box,\n  Image,\n  Badge,\n  StatGroup,\n  Stat,\n  StatLabel,\n  StatNumber,\n  Link,\n  Center,\n  Text,\n} from \"@chakra-ui/react\";\nimport coalMineImage from \"../images/Coal_mine.png\";\n\nconst MineInfo = (props) => {\n  const data = props.mineInfo;\n\n  if (!data) {\n    return (\n      <Center height=\"100%\">\n        <Text fontSize=\"sm\" color=\"gray.600\" textAlign=\"center\">\n          Click on a mine above to show more information\n        </Text>\n      </Center>\n    );\n  }\n\n  return (\n    <>\n      <Center>\n        <Image src={coalMineImage} width=\"80%\"></Image>\n      </Center>\n      <Box>\n        <Badge\n          borderRadius=\"full\"\n          px=\"2\"\n          colorScheme={data.Status === \"Operating\" ? \"green\" : \"gray\"}\n        >\n          {data.Status}\n        </Badge>\n        <Box\n          mt=\"1\"\n          fontWeight=\"semibold\"\n          as=\"h4\"\n          fontSize=\"14\"\n          lineHeight=\"tight\"\n          isTruncated\n        >\n          {data.Name}\n        </Box>\n      </Box>\n      <StatGroup>\n        <Stat marginTop=\"5px\">\n          <StatLabel color=\"gray.600\">Distance from port</StatLabel>\n          <StatNumber fontSize=\"14\">\n            {parseFloat(data.Distance).toFixed(2)} km\n          </StatNumber>\n        </Stat>\n        <Stat marginTop=\"5px\" marginLeft=\"10px\">\n          <StatLabel color=\"gray.600\">Grade</StatLabel>\n          <StatNumber fontSize=\"14\">{data.Grade}</StatNumber>\n        </Stat>\n      </StatGroup>\n      <StatGroup>\n        <Stat marginTop=\"5px\">\n          <StatLabel color=\"gray.600\">Annual Capacity</StatLabel>\n          <StatNumber fontSize=\"14\">{data.Output} Mt</StatNumber>\n        </Stat>\n        <Stat marginTop=\"5px\" marginLeft=\"10px\">\n          <StatLabel color=\"gray.600\">Find out more</StatLabel>\n          <StatNumber fontSize=\"14\">\n            <Link color=\"teal.500\" href={data.Wiki} isExternal>\n              Global Energy Monitor\n            </Link>\n          </StatNumber>\n        </Stat>\n      </StatGroup>\n    </>\n  );\n};\n\nexport default MineInfo;\n","export default __webpack_public_path__ + \"static/media/power_plant.0ce6d6e9.png\";","import {\n  Box,\n  Image,\n  Badge,\n  StatGroup,\n  Stat,\n  StatLabel,\n  StatNumber,\n  Link,\n  Center,\n  Text,\n} from \"@chakra-ui/react\";\nimport coalPlantImage from \"../images/power_plant.png\";\n\nconst PlantInfo = (props) => {\n  const data = props.plantInfo;\n\n  if (!data) {\n    return (\n      <Center height=\"100%\">\n        <Text fontSize=\"sm\" color=\"gray.600\" textAlign=\"center\">\n          Click on a coal plant above to show more information\n        </Text>\n      </Center>\n    );\n  }\n\n  return (\n    <>\n      <Center>\n        <Image src={coalPlantImage} width=\"80%\"></Image>\n      </Center>\n      <Box>\n        <Badge\n          borderRadius=\"full\"\n          px=\"2\"\n          colorScheme={data.Status === \"Operating\" ? \"green\" : \"gray\"}\n        >\n          {data.Status}\n        </Badge>\n        <Box\n          mt=\"1\"\n          fontWeight=\"semibold\"\n          as=\"h4\"\n          fontSize=\"14\"\n          lineHeight=\"tight\"\n          isTruncated\n        >\n          {data.Name}\n        </Box>\n      </Box>\n      <StatGroup>\n        <Stat marginTop=\"5px\">\n          <StatLabel color=\"gray.600\">Distance from port</StatLabel>\n          <StatNumber fontSize=\"14\">\n            {parseFloat(data.Distance).toFixed(2)} km\n          </StatNumber>\n        </Stat>\n      </StatGroup>\n      <StatGroup>\n        <Stat marginTop=\"5px\">\n          <StatLabel color=\"gray.600\">Annual Capacity</StatLabel>\n          <StatNumber fontSize=\"14\">{data.Capacity} MW</StatNumber>\n        </Stat>\n        <Stat marginTop=\"5px\" marginLeft=\"10px\">\n          <StatLabel color=\"gray.600\">Find out more</StatLabel>\n          <StatNumber fontSize=\"14\">\n            <Link color=\"teal.500\" href={data.Wiki} isExternal>\n              Global Energy Monitor\n            </Link>\n          </StatNumber>\n        </Stat>\n      </StatGroup>\n    </>\n  );\n};\nexport default PlantInfo;\n","import React, { useState } from \"react\";\nimport { Box, VStack } from \"@chakra-ui/react\";\nimport MineDisplay from \"./MineDisplay.js\";\nimport PlantDisplay from \"./PlantDisplay.js\";\nimport MineInfo from \"./MineInfo.js\";\nimport PlantInfo from \"./PlantInfo.js\";\n\nconst MinePlantSidebar = (props) => {\n  const [mine, setMine] = useState(null);\n  const [plant, setPlant] = useState(null);\n\n  const selectedPort = props.clickedPort;\n\n  if (+selectedPort.flow > 0) {\n    var flowDirection = \"Export\";\n  } else {\n    flowDirection = \"Import\";\n  }\n\n  if (flowDirection === \"Export\") {\n    return (\n      <>\n        <VStack height=\"100%\" width=\"100%\" spacing=\"20px\">\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <MineDisplay\n              sourcePort={props.clickedPort}\n              commodity={props.commoditySelected}\n              selectMine={(object) => setMine(object)}\n              level={props.levelSelected}\n            />\n          </Box>\n          <Box height=\"calc(50%)\" width=\"100%\">\n            <MineInfo mineInfo={mine} />\n          </Box>\n        </VStack>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <VStack height=\"100%\" width=\"100%\">\n          <Box height=\"calc(50% - 10px)\" width=\"100%\">\n            <PlantDisplay\n              sourcePort={props.clickedPort}\n              selectPlant={(object) => setPlant(object)}\n              level={props.levelSelected}\n            />\n          </Box>\n          <Box height=\"calc(50%)\" width=\"100%\">\n            <PlantInfo plantInfo={plant} />\n          </Box>\n        </VStack>\n      </>\n    );\n  }\n};\n\nexport default MinePlantSidebar;\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport Map from \"./components/Map\";\nimport \"./styles/custom.css\";\nimport \"./styles/outerContainer.css\";\nimport { Grid, GridItem, Box, Center, Divider, VStack } from \"@chakra-ui/react\";\nimport PortLinkSidebar from \"./components/PortLinkSidebar\";\nimport YearSelector from \"./components/YearSelector\";\nimport CommoditySelector from \"./components/CommoditySelector\";\nimport MtDisplay from \"./components/MtDisplay\";\nimport CO2Display from \"./components/CO2Display\";\nimport LevelSelector from \"./components/LevelSelector\";\nimport PortDisplay from \"./components/PortDisplay\";\nimport MinePlantSidebar from \"./components/MinePlantSidebar\";\nimport Tour from \"reactour\";\n\nconst steps = [\n  {\n    selector: \".css-1gt0haz\",\n    content:\n      \"This panel shows the coal imported or exported into or out of a chosen port.\",\n    style: {\n      backgroundColor: \"#212b57\",\n      color: \"white\",\n    },\n  },\n  {\n    selector: \".css-1w8f165\",\n    content:\n      \"Use these controls to select year, commodity and level (country or port). The map shows coal trade flows based on your selection.\",\n    style: {\n      backgroundColor: \"#212b57\",\n      color: \"white\",\n    },\n  },\n  {\n    selector: \".css-bxsqib\",\n    content:\n      \"When a port or country is selected, this panel shows the closest mines for export installations and closest coal power plants for import installations.\",\n    style: {\n      backgroundColor: \"#212b57\",\n      color: \"white\",\n    },\n  },\n];\n\nfunction App() {\n  const [isTourOpen, setIsTourOpen] = useState(true);\n  const [clickedPort, setClickedPort] = useState({\n    Commodity: \"Thermal\",\n    Port: \"Newcastle\",\n    Country: \"Australia\",\n    Year: \"2020\",\n    flow: \"130.296205\",\n    lat: \"-32.88979846221539\",\n    lon: \"151.76871572604225\",\n  });\n  const [yearSelected, setYear] = useState(2020);\n  const [commoditySelected, setCommodity] = useState(\"Thermal\");\n  const [levelSelected, setLevel] = useState(\"Ports\");\n  const [portData, setPortData] = useState(null);\n  const [flowData, setFlowData] = useState(null);\n  const [isPortClicked, setIsPortClicked] = useState(\"FALSE\");\n\n  const getActivePort = () => {\n    if (!portData && isPortClicked === \"FALSE\") {\n      return null;\n    }\n\n    const mtData = portData.filter(\n      (port) =>\n        port.Port === clickedPort.Port &&\n        +port.Year === yearSelected &&\n        port.Commodity === commoditySelected\n    );\n\n    try {\n      return mtData[0].flow;\n    } catch (error) {\n      return null;\n    }\n  };\n\n  return (\n    <>\n      <div className=\"outerContainer\">\n        <Grid\n          maxHeight=\"900px\"\n          maxWidth=\"1600px\"\n          w=\"100vw\"\n          h=\"100vh\"\n          templateRows=\"repeat(20, 1fr)\"\n          templateColumns=\"repeat(5, 1fr)\"\n          gap=\"4\"\n        >\n          <GridItem colStart={1} colEnd={1} rowStart={1} rowEnd={4}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              borderWidth=\"5pt\"\n              borderColor={clickedPort.flow > 0 ? \"tomato\" : \"#38B2AC\"}\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              display=\"flex\"\n            >\n              <PortDisplay clickedPort={clickedPort} level={levelSelected} />\n            </Box>\n          </GridItem>\n          <GridItem colStart={1} colEnd={1} rowStart={4} rowEnd={21}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              padding=\"5\"\n              display=\"flex\"\n              position=\"relative\"\n            >\n              <PortLinkSidebar\n                clickedPort={clickedPort}\n                portData={portData}\n                flowData={flowData}\n                yearSelected={yearSelected}\n                commoditySelected={commoditySelected}\n                levelSelected={levelSelected}\n                setNewPort={(port) => setClickedPort(port)}\n              />\n            </Box>\n          </GridItem>\n          <GridItem rowSpan={3} colSpan={1}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              display=\"flex\"\n            >\n              <MtDisplay mtAmount={getActivePort()} />\n            </Box>\n          </GridItem>\n          <GridItem rowSpan={3} colSpan={1}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              display=\"flex\"\n              position=\"relative\"\n            >\n              <CO2Display mtAmount={getActivePort()} />\n            </Box>\n          </GridItem>\n          <GridItem rowSpan={3} colSpan={2}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              overflow=\"hidden\"\n              display=\"flex\"\n            >\n              <Box\n                width=\"40%\"\n                height=\"100%\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n                display=\"flex\"\n              >\n                <YearSelector onSelectYear={(value) => setYear(value)} />\n              </Box>\n              <Center height=\"50px\">\n                <Divider orientation=\"vertical\" />\n              </Center>\n              <Box\n                width=\"60%\"\n                height=\"100%\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n                display=\"flex\"\n              >\n                <VStack spacing={2}>\n                  <CommoditySelector\n                    onSelectCommodity={(value) => setCommodity(value)}\n                  />\n                  <Divider orientation=\"horizontal\" />\n                  <LevelSelector\n                    onSelectLevel={(value) => setLevel(value)}\n                    isPortClicked={(value) => setIsPortClicked(value)}\n                  />\n                </VStack>\n              </Box>\n            </Box>\n          </GridItem>\n          <GridItem rowSpan={17} colSpan={3}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"2xl\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              overflow=\"hidden\"\n              position=\"relative\"\n            >\n              <Map\n                onSelectPort={(object) => setClickedPort(object)}\n                yearSelected={yearSelected}\n                commoditySelected={commoditySelected}\n                levelSelected={levelSelected}\n                setPortData={(object) => setPortData(object)}\n                setFlowData={(object) => setFlowData(object)}\n                isPortClicked={(value) => setIsPortClicked(value)}\n              />\n            </Box>\n          </GridItem>\n          <GridItem colStart={5} colEnd={5} rowStart={4} rowEnd={21}>\n            <Box\n              width=\"100%\"\n              height=\"100%\"\n              bg=\"white\"\n              borderRadius=\"lg\"\n              color=\"black\"\n              shadow=\"2xl\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              padding=\"5\"\n              display=\"flex\"\n            >\n              <MinePlantSidebar\n                clickedPort={clickedPort}\n                portData={portData}\n                flowData={flowData}\n                yearSelected={yearSelected}\n                commoditySelected={commoditySelected}\n                levelSelected={levelSelected}\n              />\n            </Box>\n          </GridItem>\n        </Grid>\n        <Tour\n          steps={steps}\n          isOpen={isTourOpen}\n          onRequestClose={() => setIsTourOpen(false)}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ChakraProvider } from \"@chakra-ui/react\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider>\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}